package KieRule;
import vg.model.*;


rule "Response worked"

when
	$incidentObject : Incident(responseWorked == true, $pf:allreadyUsedPoliceResponse);
then
	modify($incidentObject){setResponse($pf)};
end;

rule "Threat for life safety"

when
	$incidentObject : Incident(suspectThreatIntention == true && (weapon== WeaponType.SHARP || weapon==WeaponType.FIREARM) && responseWorked == false);
then
	modify($incidentObject){setSuspectThreatForLife(true)};
end;

rule "Lethal force MUST"

when
	$incidentObject : Incident(suspectThreatForLife == true);
then
	modify($incidentObject){setResponse(PoliceResponseType.LETHAL_FORCE)};
end;

rule "Does not cooperate"

when 
	$incidentObject : Incident(allreadyUsedPoliceResponse == PoliceResponseType.VERBALIZATION && responseWorked == false);
then 
	modify($incidentObject){setCooperates(false)};
end;

rule "Threat for safety"

when
	$incidentObject : Incident( cooperates == false && suspectThreatIntention == true);
then 
	modify($incidentObject){setSuspectThreatForSafety(true)};
end;

rule "Less leathal MUST"

when
	$incidentObject : Incident(suspectThreatForSafety == true  && (weapon ==  WeaponType.BLUNT || weapon == WeaponType.NONE));
then
	modify($incidentObject){setResponse(PoliceResponseType.LESS_LETHAL_METHODS)};
end;

rule "Calculate escalation"

when 
	$incidentObject : Incident(response==null );
then
	modify($incidentObject){setEscalation(
	$incidentObject.getCriminals()*$incidentObject.getWeapon().coef/$incidentObject.getCops())};
end;






